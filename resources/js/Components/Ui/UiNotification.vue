<script setup>
import { computed, onMounted, watch } from 'vue';


const model = defineModel();

const $props = defineProps({
    title      : String,
    description: String,

    defaultOpen: {
        type: Boolean,
        default: false
    },

    type: {
        type: String,
        default: 'message',
        validator(v) {
            return ['message', 'error', 'success'].includes(v)
        }
    }
});

const $emit = defineEmits(['close']);

const color = computed(() => ({
    'border-l-gray1': $props.type === 'message',
    'border-l-danger bg-danger bg-opacity-10': $props.type === 'error',
    'border-l-[#25A249] bg-[#25A249] bg-opacity-10': $props.type === 'success',
}));

watch(model, new_val => !new_val && $emit('close'));

onMounted(() => {
    if ($props.defaultOpen) model.value = true;
})

</script>

<template>
    <div v-if="model" :class="color" class="flex items-center mt-4 p-3 border-l-[3px] text-sm">
        <svg v-if="$props.type === 'message' || $props.type === 'success'" class="shrink-0 block mr-4" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10.486 16.73C10.3547 16.7303 10.2247 16.7046 10.1034 16.6545C9.98204 16.6044 9.87181 16.5308 9.77899 16.438L5.53699 12.195C5.44141 12.1028 5.36516 11.9925 5.31266 11.8706C5.26017 11.7486 5.23249 11.6174 5.23125 11.4846C5.23 11.3519 5.25521 11.2202 5.3054 11.0972C5.3556 10.9743 5.42977 10.8626 5.52359 10.7686C5.61742 10.6747 5.72902 10.6004 5.85188 10.55C5.97474 10.4996 6.1064 10.4742 6.23918 10.4753C6.37196 10.4763 6.50319 10.5038 6.62523 10.5562C6.74727 10.6085 6.85767 10.6846 6.94999 10.78L10.485 14.315L16.85 7.95202C17.0375 7.76438 17.2919 7.65891 17.5571 7.65881C17.8224 7.65872 18.0768 7.76401 18.2645 7.95152C18.4521 8.13902 18.5576 8.39339 18.5577 8.65866C18.5578 8.92393 18.4525 9.17838 18.265 9.36602L11.193 16.438C11.1002 16.5308 10.9899 16.6044 10.8686 16.6545C10.7473 16.7046 10.6173 16.7303 10.486 16.73Z" fill="#25A249"/>
        </svg>
        <svg v-else-if="$props.type === 'error'" class="shrink-0 block mr-4" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7.094 18.32C8.63317 19.5165 10.5563 20.1098 12.5021 19.9885C14.4478 19.8671 16.2823 19.0394 17.6608 17.6608C19.0394 16.2823 19.8671 14.4478 19.9885 12.5021C20.1098 10.5563 19.5165 8.63317 18.32 7.094L7.094 18.32ZM5.68 16.906L16.906 5.68C15.3668 4.48347 13.4437 3.89016 11.4979 4.01154C9.55218 4.13291 7.7177 4.96062 6.33916 6.33916C4.96062 7.7177 4.13291 9.55218 4.01154 11.4979C3.89016 13.4437 4.48347 15.3668 5.68 16.906ZM12 22C6.477 22 2 17.523 2 12C2 6.477 6.477 2 12 2C17.523 2 22 6.477 22 12C22 17.523 17.523 22 12 22Z" fill="#DA1E28"/>
        </svg>
        <div class="grow mr-2">
            <b>{{ $props.title }}</b>
            {{ $props.description }}
        </div>
        <button
            class="ml-auto"
            type="button"
            @click="model = false"
        >
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13.314 11.9L16.849 8.364C16.9445 8.27176 17.0207 8.16141 17.0731 8.03941C17.1255 7.9174 17.1531 7.78618 17.1543 7.6534C17.1554 7.52062 17.1301 7.38894 17.0798 7.26605C17.0295 7.14315 16.9553 7.0315 16.8614 6.93761C16.7675 6.84371 16.6559 6.76946 16.533 6.71918C16.4101 6.6689 16.2784 6.6436 16.1456 6.64475C16.0128 6.64591 15.8816 6.67349 15.7596 6.7259C15.6376 6.77831 15.5273 6.85449 15.435 6.95L11.899 10.485L8.364 6.95C8.27176 6.85449 8.16141 6.77831 8.03941 6.7259C7.9174 6.67349 7.78618 6.64591 7.6534 6.64475C7.52062 6.6436 7.38894 6.6689 7.26605 6.71918C7.14315 6.76946 7.0315 6.84371 6.93761 6.93761C6.84371 7.0315 6.76946 7.14315 6.71918 7.26605C6.6689 7.38894 6.6436 7.52062 6.64475 7.6534C6.64591 7.78618 6.67349 7.9174 6.7259 8.03941C6.77831 8.16141 6.85449 8.27176 6.95 8.364L10.485 11.899L6.95 15.435C6.85449 15.5273 6.77831 15.6376 6.7259 15.7596C6.67349 15.8816 6.64591 16.0128 6.64475 16.1456C6.6436 16.2784 6.6689 16.4101 6.71918 16.533C6.76946 16.6559 6.84371 16.7675 6.93761 16.8614C7.0315 16.9553 7.14315 17.0295 7.26605 17.0798C7.38894 17.1301 7.52062 17.1554 7.6534 17.1543C7.78618 17.1531 7.9174 17.1255 8.03941 17.0731C8.16141 17.0207 8.27176 16.9445 8.364 16.849L11.899 13.314L15.435 16.849C15.5273 16.9445 15.6376 17.0207 15.7596 17.0731C15.8816 17.1255 16.0128 17.1531 16.1456 17.1543C16.2784 17.1554 16.4101 17.1301 16.533 17.0798C16.6559 17.0295 16.7675 16.9553 16.8614 16.8614C16.9553 16.7675 17.0295 16.6559 17.0798 16.533C17.1301 16.4101 17.1554 16.2784 17.1543 16.1456C17.1531 16.0128 17.1255 15.8816 17.0731 15.7596C17.0207 15.6376 16.9445 15.5273 16.849 15.435L13.314 11.899V11.9Z" fill="currentColor"/>
            </svg>
        </button>
    </div>
</template>