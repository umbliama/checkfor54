<script setup>
import { computed, watch } from 'vue';


const model = defineModel();

const $props = defineProps({
    title      : String,
    description: String,

    type: {
        type: String,
        default: 'message',
        validator(v) {
            return ['message', 'error'].includes(v)
        }
    }
});

const $emit = defineEmits(['close']);

const color = computed(() => ({
    'border-l-gray1': $props.type === 'message',
    'border-l-danger text-danger': $props.type === 'error',
}));

watch(model, new_val => !new_val && $emit('close'));

</script>

<template>
    <div v-if="model" :class="color" class="flex items-center mt-4 p-3 border-l-[3px] bg-white">
        <svg v-if="$props.type === 'message'" class="shrink-0 block mr-2" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10.486 16.73C10.3547 16.7303 10.2247 16.7046 10.1034 16.6545C9.98206 16.6044 9.87182 16.5308 9.779 16.438L5.537 12.195C5.44143 12.1028 5.36517 11.9925 5.31268 11.8705C5.26018 11.7486 5.23251 11.6174 5.23126 11.4846C5.23001 11.3518 5.25522 11.2201 5.30542 11.0972C5.35561 10.9743 5.42978 10.8626 5.52361 10.7686C5.61744 10.6747 5.72903 10.6003 5.85189 10.55C5.97475 10.4996 6.10641 10.4742 6.23919 10.4752C6.37197 10.4763 6.50321 10.5038 6.62525 10.5561C6.74729 10.6084 6.85769 10.6845 6.95 10.78L10.485 14.315L16.85 7.95199C17.0375 7.76434 17.2919 7.65888 17.5571 7.65878C17.8224 7.65869 18.0769 7.76398 18.2645 7.95149C18.4521 8.13899 18.5576 8.39336 18.5577 8.65863C18.5578 8.9239 18.4525 9.17834 18.265 9.36599L11.193 16.438C11.1002 16.5308 10.9899 16.6044 10.8686 16.6545C10.7473 16.7046 10.6173 16.7303 10.486 16.73Z" fill="currentColor"/>
        </svg>
        <svg v-else-if="$props.type === 'error'" class="shrink-0 block mr-2" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18.75 6.81984L17.1802 5.25L12 10.4302L6.81984 5.25L5.25 6.81984L10.4302 12L5.25 17.1802L6.81984 18.75L12 13.5698L17.1802 18.75L18.75 17.1802L13.5698 12L18.75 6.81984Z" fill="currentColor"/>
        </svg>
        <div class="grow mr-2">
            <b>{{ $props.title }}</b>
            {{ $props.description }}
        </div>
        <button
            class="ml-auto"
            type="button"
            @click="model = false"
        >
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13.314 11.9L16.849 8.364C16.9445 8.27176 17.0207 8.16141 17.0731 8.03941C17.1255 7.9174 17.1531 7.78618 17.1543 7.6534C17.1554 7.52062 17.1301 7.38894 17.0798 7.26605C17.0295 7.14315 16.9553 7.0315 16.8614 6.93761C16.7675 6.84371 16.6559 6.76946 16.533 6.71918C16.4101 6.6689 16.2784 6.6436 16.1456 6.64475C16.0128 6.64591 15.8816 6.67349 15.7596 6.7259C15.6376 6.77831 15.5273 6.85449 15.435 6.95L11.899 10.485L8.364 6.95C8.27176 6.85449 8.16141 6.77831 8.03941 6.7259C7.9174 6.67349 7.78618 6.64591 7.6534 6.64475C7.52062 6.6436 7.38894 6.6689 7.26605 6.71918C7.14315 6.76946 7.0315 6.84371 6.93761 6.93761C6.84371 7.0315 6.76946 7.14315 6.71918 7.26605C6.6689 7.38894 6.6436 7.52062 6.64475 7.6534C6.64591 7.78618 6.67349 7.9174 6.7259 8.03941C6.77831 8.16141 6.85449 8.27176 6.95 8.364L10.485 11.899L6.95 15.435C6.85449 15.5273 6.77831 15.6376 6.7259 15.7596C6.67349 15.8816 6.64591 16.0128 6.64475 16.1456C6.6436 16.2784 6.6689 16.4101 6.71918 16.533C6.76946 16.6559 6.84371 16.7675 6.93761 16.8614C7.0315 16.9553 7.14315 17.0295 7.26605 17.0798C7.38894 17.1301 7.52062 17.1554 7.6534 17.1543C7.78618 17.1531 7.9174 17.1255 8.03941 17.0731C8.16141 17.0207 8.27176 16.9445 8.364 16.849L11.899 13.314L15.435 16.849C15.5273 16.9445 15.6376 17.0207 15.7596 17.0731C15.8816 17.1255 16.0128 17.1531 16.1456 17.1543C16.2784 17.1554 16.4101 17.1301 16.533 17.0798C16.6559 17.0295 16.7675 16.9553 16.8614 16.8614C16.9553 16.7675 17.0295 16.6559 17.0798 16.533C17.1301 16.4101 17.1554 16.2784 17.1543 16.1456C17.1531 16.0128 17.1255 15.8816 17.0731 15.7596C17.0207 15.6376 16.9445 15.5273 16.849 15.435L13.314 11.899V11.9Z" fill="currentColor"/>
            </svg>
        </button>
    </div>
</template>