<script setup>
import ApplicationLogo from '@/Components/ApplicationLogo.vue';
import { Link } from '@inertiajs/vue3';
import { usePage } from '@inertiajs/vue3'
import { SideMenuMenuStates } from '../../constants';
import store from '../../store';
import { computed, ref, toRaw } from 'vue';
import UiBtn from "@/Components/Ui/UiBtn.vue";
import UiField from "@/Components/Ui/UiField.vue";
import UiUserBadge from "@/Components/Ui/UiUserBadge.vue";

const page = usePage();

const menu = ref([
    {
        title    : 'Главная',
        href     : route('dashboard'),
        code_name: 'DASHBOARD',
        url      : 'dashboard',
        icon     : `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                        d="M20 20V9.13199L12 4.33199L4 9.13199V20H8V17.25C8 16.1891 8.42143 15.1717 9.17157 14.4216C9.92172 13.6714 10.9391 13.25 12 13.25C13.0609 13.25 14.0783 13.6714 14.8284 14.4216C15.5786 15.1717 16 16.1891 16 17.25V20H20ZM14 22V17.25C14 16.7196 13.7893 16.2108 13.4142 15.8358C13.0391 15.4607 12.5304 15.25 12 15.25C11.4696 15.25 10.9609 15.4607 10.5858 15.8358C10.2107 16.2108 10 16.7196 10 17.25V22H4C3.46957 22 2.96086 21.7893 2.58579 21.4142C2.21071 21.0391 2 20.5304 2 20V9.13199C2 8.78662 2.08943 8.44713 2.25959 8.14659C2.42976 7.84604 2.67485 7.59468 2.971 7.41699L10.971 2.61699C11.2818 2.43049 11.6375 2.33197 12 2.33197C12.3625 2.33197 12.7182 2.43049 13.029 2.61699L21.029 7.41699C21.3252 7.59468 21.5702 7.84604 21.7404 8.14659C21.9106 8.44713 22 8.78662 22 9.13199V20C22 20.5304 21.7893 21.0391 21.4142 21.4142C21.0391 21.7893 20.5304 22 20 22H14Z"
                        fill="#21272A" />
                </svg>`
    },
    {
        title    : 'Контрагенты',
        href     : route('contragents.index'),
        code_name: 'CONTRAGENTS',
        url      : 'contragents',
        icon     : `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M5.534 12.57C5.65695 12.5175 5.78916 12.4903 5.92283 12.4898C6.0565 12.4893 6.18891 12.5156 6.31223 12.5672C6.43555 12.6188 6.54728 12.6945 6.64082 12.79C6.73436 12.8855 6.8078 12.9988 6.85681 13.1231C6.90582 13.2475 6.9294 13.3804 6.92615 13.514C6.92291 13.6477 6.8929 13.7793 6.83792 13.9011C6.78293 14.023 6.70408 14.1325 6.60602 14.2234C6.50796 14.3142 6.39268 14.3845 6.267 14.43C5.59854 14.6934 5.02483 15.1519 4.6205 15.7458C4.21618 16.3397 3.99997 17.0415 4 17.76V19.5C4 19.7652 4.10536 20.0196 4.29289 20.2071C4.48043 20.3946 4.73478 20.5 5 20.5H13C13.2652 20.5 13.5196 20.3946 13.7071 20.2071C13.8946 20.0196 14 19.7652 14 19.5V17.853C14.0001 17.1115 13.7749 16.3874 13.3541 15.7768C12.9334 15.1662 12.337 14.6979 11.644 14.434C11.5175 14.3901 11.4012 14.3213 11.3018 14.2316C11.2024 14.1419 11.1221 14.0332 11.0655 13.9119C11.009 13.7905 10.9773 13.6591 10.9725 13.5253C10.9677 13.3916 10.9897 13.2582 11.0374 13.1331C11.0851 13.008 11.1574 12.8938 11.25 12.7972C11.3427 12.7006 11.4538 12.6235 11.5767 12.5706C11.6997 12.5177 11.832 12.4901 11.9659 12.4893C12.0998 12.4885 12.2324 12.5146 12.356 12.566C13.4276 12.9742 14.3499 13.6983 15.0006 14.6425C15.6514 15.5867 15.9999 16.7063 16 17.853V19.5C16 20.2956 15.6839 21.0587 15.1213 21.6213C14.5587 22.1839 13.7956 22.5 13 22.5H5C4.20435 22.5 3.44129 22.1839 2.87868 21.6213C2.31607 21.0587 2 20.2956 2 19.5V17.76C2.00014 16.6402 2.33728 15.5463 2.96756 14.6206C3.59785 13.695 4.4921 12.9805 5.534 12.57ZM9 2.5C10.0609 2.5 11.0783 2.92143 11.8284 3.67157C12.5786 4.42172 13 5.43913 13 6.5V8.5C13 9.56087 12.5786 10.5783 11.8284 11.3284C11.0783 12.0786 10.0609 12.5 9 12.5C7.93913 12.5 6.92172 12.0786 6.17157 11.3284C5.42143 10.5783 5 9.56087 5 8.5V6.5C5 5.43913 5.42143 4.42172 6.17157 3.67157C6.92172 2.92143 7.93913 2.5 9 2.5ZM9 4.5C8.46957 4.5 7.96086 4.71071 7.58579 5.08579C7.21071 5.46086 7 5.96957 7 6.5V8.5C7 9.03043 7.21071 9.53914 7.58579 9.91421C7.96086 10.2893 8.46957 10.5 9 10.5C9.53043 10.5 10.0391 10.2893 10.4142 9.91421C10.7893 9.53914 11 9.03043 11 8.5V6.5C11 5.96957 10.7893 5.46086 10.4142 5.08579C10.0391 4.71071 9.53043 4.5 9 4.5ZM18 21.5C17.7348 21.5 17.4804 21.3946 17.2929 21.2071C17.1054 21.0196 17 20.7652 17 20.5C17 20.2348 17.1054 19.9804 17.2929 19.7929C17.4804 19.6054 17.7348 19.5 18 19.5H19C19.2652 19.5 19.5196 19.3946 19.7071 19.2071C19.8946 19.0196 20 18.7652 20 18.5V16.662C20 15.9512 19.7763 15.2583 19.3606 14.6817C18.9449 14.105 18.3584 13.6738 17.684 13.449C17.5594 13.4075 17.4441 13.3419 17.3449 13.2558C17.2456 13.1698 17.1643 13.0651 17.1055 12.9476C17.0467 12.8301 17.0117 12.7022 17.0023 12.5712C16.993 12.4402 17.0095 12.3086 17.051 12.184C17.0925 12.0594 17.1581 11.9441 17.2442 11.8449C17.3302 11.7456 17.4349 11.6643 17.5524 11.6055C17.6699 11.5467 17.7978 11.5117 17.9288 11.5023C18.0598 11.493 18.1914 11.5095 18.316 11.551C19.3888 11.9085 20.3219 12.5945 20.9831 13.5118C21.6443 14.4291 22.0001 15.5312 22 16.662V18.5C22 19.2956 21.6839 20.0587 21.1213 20.6213C20.5587 21.1839 19.7956 21.5 19 21.5H18ZM15 3.5C14.7348 3.5 14.4804 3.39464 14.2929 3.20711C14.1054 3.01957 14 2.76522 14 2.5C14 2.23478 14.1054 1.98043 14.2929 1.79289C14.4804 1.60536 14.7348 1.5 15 1.5C16.0609 1.5 17.0783 1.92143 17.8284 2.67157C18.5786 3.42172 19 4.43913 19 5.5V7.5C19 8.56087 18.5786 9.57828 17.8284 10.3284C17.0783 11.0786 16.0609 11.5 15 11.5C14.7348 11.5 14.4804 11.3946 14.2929 11.2071C14.1054 11.0196 14 10.7652 14 10.5C14 10.2348 14.1054 9.98043 14.2929 9.79289C14.4804 9.60536 14.7348 9.5 15 9.5C15.5304 9.5 16.0391 9.28929 16.4142 8.91421C16.7893 8.53914 17 8.03043 17 7.5V5.5C17 4.96957 16.7893 4.46086 16.4142 4.08579C16.0391 3.71071 15.5304 3.5 15 3.5Z"
                            fill="#21272A" />
                    </svg>`
    },
    {
        title    : 'Оборудование',
        href     : route('equip.report'),
        code_name: 'EQUIPMENT',
        url      : 'equip',
        icon     : `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M10.815 5.094C10.2997 5.13093 9.78263 5.05222 9.30164 4.86363C8.82065 4.67504 8.38789 4.38134 8.035 4.004L7.951 4.003C7.598 4.38048 7.16508 4.67426 6.6839 4.86285C6.20273 5.05144 5.68548 5.13008 5.17 5.093C5.09156 5.61503 4.89529 6.11234 4.59606 6.54723C4.29684 6.98212 3.90251 7.34317 3.443 7.603C3.63658 8.0433 3.73654 8.51902 3.73654 9C3.73654 9.48098 3.63658 9.9567 3.443 10.397C3.90251 10.6568 4.29684 11.0179 4.59606 11.4528C4.89529 11.8877 5.09156 12.385 5.17 12.907C5.68532 12.8701 6.20237 12.9488 6.68336 13.1374C7.16435 13.326 7.59711 13.6197 7.95 13.997H8.034C8.38689 13.6197 8.81965 13.326 9.30064 13.1374C9.78163 12.9488 10.2987 12.8701 10.814 12.907C10.8924 12.385 11.0887 11.8877 11.3879 11.4528C11.6872 11.0179 12.0815 10.6568 12.541 10.397C12.3474 9.9567 12.2475 9.48098 12.2475 9C12.2475 8.51902 12.3474 8.0433 12.541 7.603C12.0817 7.34306 11.6875 6.98196 11.3885 6.54707C11.0895 6.11219 10.8933 5.61494 10.815 5.093V5.094ZM15 7.714C14.7714 7.84203 14.5811 8.02868 14.4486 8.25471C14.3162 8.48075 14.2463 8.73801 14.2463 9C14.2463 9.26199 14.3162 9.51925 14.4486 9.74529C14.5811 9.97132 14.7714 10.158 15 10.286L14.498 11.97C14.2267 11.9231 13.9477 11.9532 13.6927 12.0568C13.4376 12.1605 13.2167 12.3335 13.055 12.5563C12.8933 12.7792 12.7973 13.0428 12.7779 13.3174C12.7584 13.5921 12.8163 13.8666 12.945 14.11L11.502 15.232C11.3109 15.0754 11.0834 14.9694 10.8406 14.9237C10.5978 14.8781 10.3474 14.8942 10.1124 14.9707C9.87748 15.0472 9.66555 15.1816 9.49614 15.3614C9.32673 15.5413 9.20529 15.7609 9.143 16L6.839 15.994C6.77581 15.7564 6.65413 15.5383 6.48506 15.3598C6.31599 15.1812 6.10492 15.0478 5.87108 14.9718C5.63724 14.8957 5.38808 14.8794 5.14632 14.9243C4.90456 14.9693 4.6779 15.074 4.487 15.229L3.045 14.098C3.17024 13.8556 3.22568 13.5831 3.20514 13.311C3.1846 13.039 3.08889 12.7779 2.92868 12.557C2.76846 12.3362 2.55005 12.1641 2.29779 12.0601C2.04552 11.9561 1.76933 11.9242 1.5 11.968L1 10.278C1.22454 10.1488 1.41104 9.96263 1.54073 9.73835C1.67041 9.51407 1.7387 9.25957 1.7387 9.0005C1.7387 8.74143 1.67041 8.48693 1.54073 8.26265C1.41104 8.03837 1.22454 7.85224 1 7.723L1.5 6.033C1.76933 6.07678 2.04552 6.04488 2.29779 5.94088C2.55005 5.83687 2.76846 5.66483 2.92868 5.44396C3.08889 5.22308 3.1846 4.96205 3.20514 4.68996C3.22568 4.41787 3.17024 4.14542 3.045 3.903L4.487 2.77C4.6779 2.92523 4.90465 3.03016 5.14653 3.07522C5.38841 3.12028 5.63773 3.10403 5.87172 3.02796C6.10571 2.95188 6.31692 2.81841 6.48606 2.63972C6.6552 2.46103 6.77688 2.24281 6.84 2.005L9.143 2C9.20537 2.23893 9.3268 2.45834 9.49614 2.63807C9.66547 2.8178 9.87728 2.95207 10.1121 3.02854C10.3469 3.10502 10.5971 3.12124 10.8398 3.07571C11.0825 3.03018 11.3099 2.92437 11.501 2.768L12.945 3.89C12.8163 4.13338 12.7584 4.40795 12.7779 4.68256C12.7973 4.95718 12.8933 5.22085 13.055 5.44366C13.2167 5.66648 13.4376 5.83952 13.6927 5.94315C13.9477 6.04679 14.2267 6.07688 14.498 6.03L15 7.714ZM9.188 16.912C10.0018 16.7914 10.7918 16.5451 11.53 16.182C11.5034 16.2546 11.4744 16.3263 11.443 16.397C11.9025 16.6568 12.2968 17.0179 12.5961 17.4528C12.8953 17.8877 13.0916 18.385 13.17 18.907C13.6853 18.8701 14.2024 18.9488 14.6834 19.1374C15.1643 19.326 15.5971 19.6197 15.95 19.997H16.034C16.3869 19.6197 16.8196 19.326 17.3006 19.1374C17.7816 18.9488 18.2987 18.8701 18.814 18.907C18.8924 18.385 19.0887 17.8877 19.3879 17.4528C19.6872 17.0179 20.0815 16.6568 20.541 16.397C20.3474 15.9567 20.2475 15.481 20.2475 15C20.2475 14.519 20.3474 14.0433 20.541 13.603C20.0817 13.3431 19.6875 12.982 19.3885 12.5471C19.0895 12.1122 18.8933 11.6149 18.815 11.093C18.2997 11.1299 17.7826 11.0512 17.3016 10.8626C16.8206 10.674 16.3879 10.3803 16.035 10.003H15.951L15.936 10.019C16.0209 9.34972 16.0215 8.67245 15.938 8.003L17.144 8C17.2064 8.23893 17.3278 8.45834 17.4971 8.63807C17.6665 8.8178 17.8783 8.95207 18.1131 9.02854C18.3479 9.10502 18.5981 9.12124 18.8408 9.07571C19.0835 9.03018 19.3109 8.92437 19.502 8.768L20.946 9.89C20.8173 10.1334 20.7594 10.4079 20.7789 10.6826C20.7983 10.9572 20.8943 11.2208 21.056 11.4437C21.2177 11.6665 21.4386 11.8395 21.6937 11.9432C21.9487 12.0468 22.2277 12.0769 22.499 12.03L23 13.714C22.7714 13.842 22.5811 14.0287 22.4486 14.2547C22.3162 14.4807 22.2463 14.738 22.2463 15C22.2463 15.262 22.3162 15.5193 22.4486 15.7453C22.5811 15.9713 22.7714 16.158 23 16.286L22.498 17.97C22.2267 17.9231 21.9477 17.9532 21.6927 18.0568C21.4376 18.1605 21.2167 18.3335 21.055 18.5563C20.8933 18.7792 20.7973 19.0428 20.7779 19.3174C20.7584 19.5921 20.8163 19.8666 20.945 20.11L19.502 21.232C19.3109 21.0754 19.0834 20.9694 18.8406 20.9237C18.5978 20.8781 18.3474 20.8942 18.1124 20.9707C17.8775 21.0472 17.6655 21.1816 17.4961 21.3614C17.3267 21.5413 17.2053 21.7609 17.143 22L14.839 21.994C14.7758 21.7564 14.6541 21.5383 14.4851 21.3598C14.316 21.1812 14.1049 21.0478 13.8711 20.9718C13.6372 20.8957 13.3881 20.8794 13.1463 20.9243C12.9046 20.9693 12.6779 21.074 12.487 21.229L11.045 20.098C11.1702 19.8556 11.2257 19.5831 11.2051 19.311C11.1846 19.039 11.0889 18.7779 10.9287 18.557C10.7685 18.3362 10.55 18.1641 10.2978 18.0601C10.0455 17.9561 9.76933 17.9242 9.5 17.968L9.188 16.912ZM8 12C7.60603 12 7.21593 11.9224 6.85195 11.7716C6.48797 11.6209 6.15726 11.3999 5.87868 11.1213C5.6001 10.8427 5.37913 10.512 5.22836 10.1481C5.0776 9.78407 5 9.39397 5 9C5 8.60603 5.0776 8.21593 5.22836 7.85195C5.37913 7.48797 5.6001 7.15726 5.87868 6.87868C6.15726 6.6001 6.48797 6.37913 6.85195 6.22836C7.21593 6.0776 7.60603 6 8 6C8.79565 6 9.55871 6.31607 10.1213 6.87868C10.6839 7.44129 11 8.20435 11 9C11 9.79565 10.6839 10.5587 10.1213 11.1213C9.55871 11.6839 8.79565 12 8 12ZM8 10C8.26522 10 8.51957 9.89464 8.70711 9.70711C8.89464 9.51957 9 9.26522 9 9C9 8.73478 8.89464 8.48043 8.70711 8.29289C8.51957 8.10536 8.26522 8 8 8C7.73478 8 7.48043 8.10536 7.29289 8.29289C7.10536 8.48043 7 8.73478 7 9C7 9.26522 7.10536 9.51957 7.29289 9.70711C7.48043 9.89464 7.73478 10 8 10ZM16 18C15.2044 18 14.4413 17.6839 13.8787 17.1213C13.3161 16.5587 13 15.7956 13 15C13 14.2044 13.3161 13.4413 13.8787 12.8787C14.4413 12.3161 15.2044 12 16 12C16.7956 12 17.5587 12.3161 18.1213 12.8787C18.6839 13.4413 19 14.2044 19 15C19 15.7956 18.6839 16.5587 18.1213 17.1213C17.5587 17.6839 16.7956 18 16 18ZM16 16C16.2652 16 16.5196 15.8946 16.7071 15.7071C16.8946 15.5196 17 15.2652 17 15C17 14.7348 16.8946 14.4804 16.7071 14.2929C16.5196 14.1054 16.2652 14 16 14C15.7348 14 15.4804 14.1054 15.2929 14.2929C15.1054 14.4804 15 14.7348 15 15C15 15.2652 15.1054 15.5196 15.2929 15.7071C15.4804 15.8946 15.7348 16 16 16Z"
                            fill="#21272A" />
                    </svg>`
    },
    {
        title    : 'Услуги',
        href     : route('services.index'),
        code_name: 'SERVICES',
        url      : 'services',
        icon     : `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M10 4V6H14V4H10ZM16 4H17C17.5304 4 18.0391 4.21071 18.4142 4.58579C18.7893 4.96086 19 5.46957 19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6C5 5.46957 5.21071 4.96086 5.58579 4.58579C5.96086 4.21071 6.46957 4 7 4H8C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4ZM16 6C16 6.53043 15.7893 7.03914 15.4142 7.41421C15.0391 7.78929 14.5304 8 14 8H10C9.46957 8 8.96086 7.78929 8.58579 7.41421C8.21071 7.03914 8 6.53043 8 6H7V20H17V6H16ZM9 10H15C15.2652 10 15.5196 10.1054 15.7071 10.2929C15.8946 10.4804 16 10.7348 16 11C16 11.2652 15.8946 11.5196 15.7071 11.7071C15.5196 11.8946 15.2652 12 15 12H9C8.73478 12 8.48043 11.8946 8.29289 11.7071C8.10536 11.5196 8 11.2652 8 11C8 10.7348 8.10536 10.4804 8.29289 10.2929C8.48043 10.1054 8.73478 10 9 10ZM9 15H15C15.2652 15 15.5196 15.1054 15.7071 15.2929C15.8946 15.4804 16 15.7348 16 16C16 16.2652 15.8946 16.5196 15.7071 16.7071C15.5196 16.8946 15.2652 17 15 17H9C8.73478 17 8.48043 16.8946 8.29289 16.7071C8.10536 16.5196 8 16.2652 8 16C8 15.7348 8.10536 15.4804 8.29289 15.2929C8.48043 15.1054 8.73478 15 9 15Z"
                            fill="#21272A" />
                    </svg>`
    },
    {
        title    : 'Продажа',
        href     : route('sale.index'),
        code_name: 'SALE',
        url      : 'sale',
        icon     : `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 1V23" stroke="#21272A" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round" />
                        <path
                            d="M17 5H9.5C8.57174 5 7.6815 5.36875 7.02513 6.02513C6.36875 6.6815 6 7.57174 6 8.5C6 9.42826 6.36875 10.3185 7.02513 10.9749C7.6815 11.6313 8.57174 12 9.5 12H14.5C15.4283 12 16.3185 12.3687 16.9749 13.0251C17.6313 13.6815 18 14.5717 18 15.5C18 16.4283 17.6313 17.3185 16.9749 17.9749C16.3185 18.6313 15.4283 19 14.5 19H6"
                            stroke="#21272A" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>`
    },
    {
        title    : 'Разбор инцидентов',
        href     : route('incident.index'),
        code_name: 'INCIDENT',
        url      : 'incident',
        icon     : `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M14.8 4.61301L21.501 15.774C22.464 17.377 21.991 19.486 20.444 20.484C19.9248 20.8202 19.3196 20.9994 18.701 21H5.298C3.477 21 2 19.47 2 17.581C2 16.942 2.173 16.317 2.498 15.774L9.2 4.61301C10.162 3.01001 12.196 2.51901 13.743 3.51701C14.171 3.79301 14.533 4.16801 14.8 4.61301ZM12.58 5.45201C12.4576 5.37327 12.3205 5.32016 12.1769 5.29589C12.0334 5.27162 11.8865 5.2767 11.745 5.31081C11.6035 5.34492 11.4703 5.40737 11.3536 5.49437C11.2369 5.58138 11.1391 5.69113 11.066 5.81701L4.365 16.98C4.25615 17.1619 4.19877 17.37 4.199 17.582C4.199 18.212 4.691 18.722 5.299 18.722H18.7C18.906 18.722 19.107 18.662 19.281 18.55C19.5307 18.3841 19.7067 18.1283 19.7725 17.8358C19.8383 17.5434 19.7886 17.2368 19.634 16.98L12.933 5.81701C12.8451 5.67003 12.7247 5.54517 12.581 5.45201H12.58ZM12 17C11.7348 17 11.4804 16.8947 11.2929 16.7071C11.1054 16.5196 11 16.2652 11 16C11 15.7348 11.1054 15.4804 11.2929 15.2929C11.4804 15.1054 11.7348 15 12 15C12.2652 15 12.5196 15.1054 12.7071 15.2929C12.8946 15.4804 13 15.7348 13 16C13 16.2652 12.8946 16.5196 12.7071 16.7071C12.5196 16.8947 12.2652 17 12 17ZM12 8.00001C12.2652 8.00001 12.5196 8.10537 12.7071 8.2929C12.8946 8.48044 13 8.73479 13 9.00001V13C13 13.2652 12.8946 13.5196 12.7071 13.7071C12.5196 13.8947 12.2652 14 12 14C11.7348 14 11.4804 13.8947 11.2929 13.7071C11.1054 13.5196 11 13.2652 11 13V9.00001C11 8.73479 11.1054 8.48044 11.2929 8.2929C11.4804 8.10537 11.7348 8.00001 12 8.00001Z"
                            fill="#21272A" />
                    </svg>`
    },
])

const user = computed(() => page.props.auth.user);

const notifications       = computed(() => store.getters['notifications/getNotifications']);
const notificationsLength = computed(() => store.getters['notifications/getNotificationsLength']);

const selectMenu = (menuState) => {
    store.dispatch('setActiveSidemenuItem', menuState);
};
const checkNewNotifications = (userId) => {
    store.dispatch('notifications/checkNewNotifications', userId);
}

setInterval(() => {
    checkNewNotifications(toRaw(user.value.id))
}, 3000);
</script>

    <template>
        <div class="flex justify-between items-center w-full bg-white lg:h-screen lg:flex-col lg:justify-start lg:px-4 lg:py-6 lg:border-r-2 p-4">
            <Link href="/">
                <div class="flex flex-col items-end">
                    <div class="flex justify-center items-center">
                        <ApplicationLogo class="w-5 h-5 fill-current text-gray-500" />

                        <h1 class="ml-1 font-bold text-side-gray-text text-2xl">БМ Сервис</h1>

                    </div>
                    <span class="flex justify-end lg:flex hidden text-my-nav-text text-xs">{{ user.name }} {{ user.lastname }}</span>
                </div>
            </Link>

            <div class="flex items-center lg:mt-4">
                <span class="inline-flex rounded-md order-2 lg:order-[unset]">
                    <Link href="/profile" class="block">
                        <UiUserBadge :size="{ pc: '48px', mob: '40px' }" />
<!--                        <button
                            type="button"
                            class="flex items-center justify-center w-12 h-12 rounded-full bg-my-gray"
                        >
                            <svg class="block" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8.534 12.07C8.65695 12.0175 8.78916 11.9903 8.92283 11.9898C9.0565 11.9893 9.18891 12.0156 9.31223 12.0672C9.43555 12.1188 9.54728 12.1945 9.64082 12.29C9.73436 12.3855 9.8078 12.4988 9.85681 12.6231C9.90582 12.7475 9.9294 12.8804 9.92615 13.014C9.92291 13.1477 9.8929 13.2793 9.83792 13.4011C9.78293 13.523 9.70408 13.6325 9.60602 13.7234C9.50796 13.8142 9.39268 13.8845 9.267 13.93C8.59854 14.1934 8.02483 14.6519 7.6205 15.2458C7.21618 15.8397 6.99997 16.5415 7 17.26V19C7 19.2652 7.10536 19.5196 7.29289 19.7071C7.48043 19.8946 7.73478 20 8 20H16C16.2652 20 16.5196 19.8946 16.7071 19.7071C16.8946 19.5196 17 19.2652 17 19V17.353C17.0001 16.6115 16.7749 15.8874 16.3541 15.2768C15.9334 14.6662 15.337 14.1979 14.644 13.934C14.5175 13.8901 14.4012 13.8213 14.3018 13.7316C14.2024 13.6419 14.1221 13.5332 14.0655 13.4119C14.009 13.2905 13.9773 13.1591 13.9725 13.0253C13.9677 12.8916 13.9897 12.7582 14.0374 12.6331C14.0851 12.508 14.1574 12.3938 14.25 12.2972C14.3427 12.2006 14.4538 12.1235 14.5767 12.0706C14.6997 12.0177 14.832 11.9901 14.9659 11.9893C15.0998 11.9885 15.2324 12.0146 15.356 12.066C16.4276 12.4742 17.3499 13.1983 18.0006 14.1425C18.6514 15.0867 18.9999 16.2063 19 17.353V19C19 19.7956 18.6839 20.5587 18.1213 21.1213C17.5587 21.6839 16.7956 22 16 22H8C7.20435 22 6.44129 21.6839 5.87868 21.1213C5.31607 20.5587 5 19.7956 5 19V17.26C5.00014 16.1402 5.33728 15.0463 5.96756 14.1206C6.59785 13.195 7.4921 12.4805 8.534 12.07ZM12 2C13.0609 2 14.0783 2.42143 14.8284 3.17157C15.5786 3.92172 16 4.93913 16 6V8C16 9.06087 15.5786 10.0783 14.8284 10.8284C14.0783 11.5786 13.0609 12 12 12C10.9391 12 9.92172 11.5786 9.17157 10.8284C8.42143 10.0783 8 9.06087 8 8V6C8 4.93913 8.42143 3.92172 9.17157 3.17157C9.92172 2.42143 10.9391 2 12 2V2ZM12 4C11.4696 4 10.9609 4.21071 10.5858 4.58579C10.2107 4.96086 10 5.46957 10 6V8C10 8.53043 10.2107 9.03914 10.5858 9.41421C10.9609 9.78929 11.4696 10 12 10C12.5304 10 13.0391 9.78929 13.4142 9.41421C13.7893 9.03914 14 8.53043 14 8V6C14 5.46957 13.7893 4.96086 13.4142 4.58579C13.0391 4.21071 12.5304 4 12 4Z" fill="#C1C7CD"/>
                            </svg>
                        </button>-->
                    </Link>
                </span>

                <ui-btn class="order-1 lg:order-[unset]" icon>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M20 8.163C19.674 8.34626 19.4027 8.61303 19.2139 8.93588C19.0252 9.25873 18.9258 9.62602 18.926 10C18.926 10.789 19.359 11.476 20 11.837L19.283 14.243C18.8954 14.1763 18.497 14.2196 18.1327 14.3678C17.7685 14.516 17.453 14.7633 17.2222 15.0816C16.9913 15.3999 16.8542 15.7766 16.8264 16.1688C16.7986 16.5611 16.8813 16.9533 17.065 17.301L15.003 18.903C14.73 18.6792 14.4051 18.5277 14.0582 18.4624C13.7113 18.3971 13.3535 18.4202 13.0179 18.5295C12.6822 18.6387 12.3794 18.8307 12.1374 19.0877C11.8954 19.3447 11.7219 19.6584 11.633 20L8.343 19.992C8.25308 19.652 8.07938 19.34 7.83778 19.0845C7.59618 18.829 7.29439 18.6381 6.95999 18.5292C6.62559 18.4204 6.26924 18.3972 5.92353 18.4616C5.57782 18.526 5.25377 18.676 4.981 18.898L2.921 17.283C3.09957 16.9367 3.17855 16.5477 3.14914 16.1592C3.11973 15.7708 2.98309 15.3981 2.75442 15.0826C2.52576 14.7672 2.21404 14.5214 1.85398 14.3727C1.49391 14.2239 1.09962 14.178 0.715 14.24L0 11.825C0.319949 11.6398 0.585514 11.3737 0.770003 11.0533C0.954492 10.733 1.0514 10.3697 1.051 10C1.051 9.22 0.63 8.54 0 8.175L0.715 5.76C1.0997 5.82225 1.49412 5.77648 1.85435 5.6278C2.21457 5.47912 2.52645 5.23336 2.75525 4.9179C2.98405 4.60243 3.12078 4.22964 3.15022 3.84106C3.17966 3.45247 3.10066 3.06334 2.922 2.717L4.98 1.102C5.25277 1.32395 5.57682 1.47399 5.92253 1.53841C6.26824 1.60283 6.62459 1.57957 6.95899 1.47075C7.29339 1.36194 7.59518 1.17104 7.83678 0.915511C8.07838 0.659981 8.25208 0.347971 8.342 0.008L11.634 0C11.7229 0.341608 11.8964 0.655348 12.1384 0.912329C12.3804 1.16931 12.6832 1.36127 13.0189 1.47053C13.3545 1.5798 13.7123 1.60285 14.0592 1.53758C14.4061 1.4723 14.731 1.32079 15.004 1.097L17.064 2.7C16.8803 3.04769 16.7976 3.43989 16.8254 3.83215C16.8532 4.22442 16.9903 4.60106 17.2212 4.91938C17.452 5.23771 17.7675 5.485 18.1317 5.63322C18.496 5.78144 18.8944 5.82467 19.282 5.758L20 8.162V8.163ZM14.823 3.68C14.823 3.617 14.825 3.555 14.828 3.492L14.748 3.43C13.9691 3.64219 13.1449 3.61989 12.3786 3.36588C11.6123 3.11187 10.9379 2.63744 10.44 2.002L9.536 2.004C9.03992 2.63674 8.36874 3.10966 7.60597 3.36392C6.8432 3.61817 6.02251 3.64255 5.246 3.434L5.151 3.51C5.18866 4.41268 4.92769 5.30259 4.4085 6.04197C3.8893 6.78135 3.14085 7.32895 2.279 7.6C2.78181 8.29879 3.05191 9.13811 3.051 9.999C3.051 10.881 2.771 11.714 2.279 12.399C3.14085 12.67 3.8893 13.2176 4.4085 13.957C4.92769 14.6964 5.18866 15.5863 5.151 16.489L5.247 16.564C6.02339 16.3562 6.84371 16.3809 7.60617 16.6351C8.36862 16.8894 9.03966 17.3619 9.536 17.994L10.44 17.996C10.9376 17.3604 11.6118 16.8859 12.3779 16.6319C13.1441 16.3778 13.9682 16.3556 14.747 16.568L14.827 16.506C14.7858 15.6005 15.0452 14.7068 15.5649 13.9642C16.0845 13.2215 16.8352 12.6716 17.7 12.4C17.1968 11.701 16.9263 10.8613 16.927 10C16.927 9.118 17.208 8.284 17.7 7.6C16.866 7.33781 16.1374 6.81638 15.6201 6.11155C15.1029 5.40672 14.824 4.55526 14.824 3.681L14.823 3.68ZM10 14C8.93913 14 7.92172 13.5786 7.17157 12.8284C6.42143 12.0783 6 11.0609 6 10C6 8.93913 6.42143 7.92172 7.17157 7.17157C7.92172 6.42143 8.93913 6 10 6C11.0609 6 12.0783 6.42143 12.8284 7.17157C13.5786 7.92172 14 8.93913 14 10C14 11.0609 13.5786 12.0783 12.8284 12.8284C12.0783 13.5786 11.0609 14 10 14ZM10 12C10.5304 12 11.0391 11.7893 11.4142 11.4142C11.7893 11.0391 12 10.5304 12 10C12 9.46957 11.7893 8.96086 11.4142 8.58579C11.0391 8.21071 10.5304 8 10 8C9.46957 8 8.96086 8.21071 8.58579 8.58579C8.21071 8.96086 8 9.46957 8 10C8 10.5304 8.21071 11.0391 8.58579 11.4142C8.96086 11.7893 9.46957 12 10 12Z"
                            fill="#001D6C" />
                    </svg>
                </ui-btn>

                <ui-btn
                    :href="route('notification.index')"
                    :badge-cond="notificationsLength > 0"
                    :badge="notificationsLength"
                    icon
                >
                    <svg width="18" height="20" viewBox="0 0 18 20" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M13.666 11.782L13 11.186V6C13 4.93913 12.5786 3.92172 11.8284 3.17157C11.0783 2.42143 10.0609 2 9 2C7.93914 2 6.92172 2.42143 6.17158 3.17157C5.42143 3.92172 5.00001 4.93913 5.00001 6V11.186L4.33401 11.782C3.36755 12.6445 2.65987 13.7586 2.29001 15H15.71C15.3401 13.7586 14.6325 12.6445 13.666 11.782ZM12 17C12 17.7956 11.6839 18.5587 11.1213 19.1213C10.5587 19.6839 9.79565 20 9 20C8.20436 20 7.44129 19.6839 6.87868 19.1213C6.31608 18.5587 6.00001 17.7956 6.00001 17H5.17321e-06C-0.0013543 15.7335 0.265243 14.4811 0.782286 13.325C1.29933 12.1689 2.05512 11.1353 3.00001 10.292V6C3.00001 4.4087 3.63215 2.88258 4.75736 1.75736C5.88258 0.632141 7.40871 0 9 0C10.5913 0 12.1174 0.632141 13.2426 1.75736C14.3679 2.88258 15 4.4087 15 6V10.292C15.9449 11.1353 16.7007 12.1689 17.2177 13.325C17.7348 14.4811 18.0014 15.7335 18 17H12ZM9 18C9.26522 18 9.51958 17.8946 9.70711 17.7071C9.89465 17.5196 10 17.2652 10 17H8C8 17.2652 8.10536 17.5196 8.2929 17.7071C8.48043 17.8946 8.73479 18 9 18Z"
                                fill="#001D6C" />
                        </svg>
                </ui-btn>
            </div>

            <form class="hidden lg:flex max-w-md mx-auto mt-4">
                <ui-field :inp-attrs="{ placeholder: 'Поиск...' }">
                    <template #prepend>
                        <button type="submit">
                            <svg class="w-4 h-4" aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" />
                            </svg>
                        </button>
                    </template>
                </ui-field>
            </form>

<!--            <form class="sm:hidden lg:flex md:flex max-w-md mx-auto">

                <label for="default-search"
                    class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Search</label>
                <div class="relative">
                    <div class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none">
                        <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" />
                        </svg>
                    </div>
                    <input type="search" id="default-search"
                        class="block w-full p-4 ps-10 text-sm text-gray-900 border-b-2 border-gray-200 border-t-0 border-l-0 border-r-0  bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-white-700  dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                        placeholder="Поиск" />
                </div>
            </form>-->

            <div class="w-full hidden mt-4 lg:flex">
<!--                <div class="mt-5">
                    <component :is="currentComponent" />
                </div>-->
                <ul class="text-sm w-full font-medium text-white-900 bg-white">
                    <Link v-for="menu_item in menu" class="flex items-center" :href="menu_item.href">
                        <li
                            :class="{ 'bg-my-gray': $page.url.startsWith('/' + menu_item.url) }"
                            class="flex items-center w-full px-2 py-3 text-gray-500 border-b border-b-my-gray"
                        >
                            <span v-html="menu_item.icon" />
                            <span v-text="menu_item.title" class="ml-2 font-medium text-black text-sm" />
                        </li>
                    </Link>
                </ul>
            </div>

        </div>
    </template>
